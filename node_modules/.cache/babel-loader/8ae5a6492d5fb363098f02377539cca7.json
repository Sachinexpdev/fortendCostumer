{"ast":null,"code":"var _jsxFileName = \"/home/development/floey 1/CustomerPortal/Sept14,2021/floey-customer/src/views/pages/Login.js\";\nimport React from \"react\";\nimport Header from \"../components/AuthComponents/Header\";\nimport \"../../assets/css/login.css\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../../assets/img/loader\";\nimport Cookies from 'universal-cookie';\nimport BASE_URL from './base';\nimport { toastr } from \"react-redux-toastr\";\nimport $ from \"jquery\";\nimport GoogleLogin from 'react-google-login';\nimport { signInWithGoogle } from \"../components/SocialLogin\"; // *****google login******\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst axios = require('axios');\n\nfunction Login() {\n  // const googleResponse = async (response) => {\n  //   alert(response.accessToken)\n  //   let res = await axios.post(\n  //     \"http://127.0.0.1:8000/user/authorize/rest-auth/google/\",\n  //     {\n  //       access_token: response.accessToken,\n  //     }\n  //   );\n  //   console.log(res);\n  //   window.location.href='home/';\n  //   // return await res.status;\n  // };\n  const cookies = new Cookies();\n\n  const axios = require('axios');\n\n  console.log(cookies.get('email'));\n\n  async function MyOne(e) {\n    // debugger\n    var email = document.getElementById(\"email\").value;\n    var password = document.getElementById(\"password\").value; // cookies.set('uuid',email,{path:'/'});\n\n    e.preventDefault();\n\n    try {\n      $(\".laoder\").show();\n      console.log('Trying');\n      let res = await axios.post(BASE_URL + 'user/authorize/', {\n        email: email,\n        password: password\n      });\n\n      if (res.status === 200) {\n        // debugger\n        toastr.success('Log in Success!');\n        console.log(res.data);\n        cookies.set('uuid', res.data.uuid, {\n          path: '/'\n        });\n        cookies.set('email', res.data.results.email, {\n          path: '/'\n        });\n        cookies.set('city', res.data.results.city, {\n          path: '/'\n        });\n        cookies.set('gender', res.data.gender, {\n          path: '/'\n        });\n        cookies.set('user_fullname', res.data.first_name + ' ' + res.data.last_name, {\n          path: '/'\n        });\n        setTimeout(function () {\n          window.location = '/Home';\n        }, 3000);\n      }\n    } catch (err) {\n      console.error(err);\n      $(\".laoder\").hide(); // alert('Login unsuccessfull.');\n\n      toastr.error('Log in Unsuccessful!');\n      setTimeout(function () {\n        window.location.reload();\n      }, 3000);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login lg-2\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        text: \"Don't have an account?\",\n        link: \"/\",\n        displayLink: \"SignUp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"laoder loader_login l-login\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Loader\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 53\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            placeholder: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            onClick: MyOne,\n            value: \"Log in\",\n            className: \"sign-in-button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"or\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"left-bar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"or\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"right-bar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Log in with Google\",\n            onClick: signInWithGoogle,\n            className: \"sign-in-button-with-google\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"link-area\",\n            children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              children: \"sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/development/floey 1/CustomerPortal/Sept14,2021/floey-customer/src/views/pages/Login.js"],"names":["React","Header","Link","Loader","Cookies","BASE_URL","toastr","$","GoogleLogin","signInWithGoogle","axios","require","Login","cookies","console","log","get","MyOne","e","email","document","getElementById","value","password","preventDefault","show","res","post","status","success","data","set","uuid","path","results","city","gender","first_name","last_name","setTimeout","window","location","err","error","hide","reload"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"../components/AuthComponents/Header\";\nimport \"../../assets/css/login.css\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../../assets/img/loader\";\n\nimport Cookies from 'universal-cookie';\nimport BASE_URL from './base';\nimport { toastr } from \"react-redux-toastr\";\nimport $ from \"jquery\";\nimport GoogleLogin from 'react-google-login';\nimport { signInWithGoogle } from \"../components/SocialLogin\";\n\n// *****google login******\nconst axios = require('axios')\n\n\nfunction Login() {\n\n  // const googleResponse = async (response) => {\n  //   alert(response.accessToken)\n  //   let res = await axios.post(\n  //     \"http://127.0.0.1:8000/user/authorize/rest-auth/google/\",\n  //     {\n  //       access_token: response.accessToken,\n\n  //     }\n  //   );\n  //   console.log(res);\n  //   window.location.href='home/';\n  //   // return await res.status;\n  // };\n\n  const cookies = new Cookies();\n\n  const axios = require('axios');\n  console.log(cookies.get('email'));\n\n  async function MyOne(e) {\n    // debugger\n\n    var email = document.getElementById(\"email\").value;\n    var password = document.getElementById(\"password\").value;\n\n    // cookies.set('uuid',email,{path:'/'});\n\n\n    e.preventDefault();\n    try {\n      $(\".laoder\").show();\n      console.log('Trying');\n      let res = await axios.post(BASE_URL + 'user/authorize/', {\n\n        email: email,\n        password: password,\n      })\n      if (res.status === 200) {\n        // debugger\n        toastr.success('Log in Success!');\n\n\n        console.log(res.data)\n        cookies.set('uuid', res.data.uuid, { path: '/' });\n        cookies.set('email', res.data.results.email, { path: '/' });\n        cookies.set('city', res.data.results.city, { path: '/' });\n        cookies.set('gender', res.data.gender, { path: '/' });\n        cookies.set('user_fullname', res.data.first_name + ' ' + res.data.last_name, { path: '/' });\n        setTimeout(function () {\n          window.location = '/Home';\n        }, 3000);\n\n      }\n    }\n    catch (err) {\n      console.error(err);\n      $(\".laoder\").hide();\n      // alert('Login unsuccessfull.');\n\n      toastr.error('Log in Unsuccessful!');\n      setTimeout(function () {\n        window.location.reload();\n      }, 3000);\n    }\n  }\n\n  return (\n    <>\n\n      <div className=\"login lg-2\">\n        {/* *****LOADER TOSTAR*****  */}\n\n\n        <Header text=\"Don't have an account?\"\n          link=\"/\" displayLink=\"SignUp\" />\n\n        <div className=\"login-body\">\n          <div class=\"laoder loader_login l-login\"> <img src={Loader} /></div>\n\n          <form>\n            <h2>Log In</h2>\n\n            <input type=\"email\" id='email' placeholder=\"Email\" />\n            <input type=\"password\" id='password' placeholder=\"Password\" />\n            <input type=\"submit\" onClick={MyOne} value=\"Log in\" className=\"sign-in-button\" />\n\n            <div className=\"or\">\n              <span className=\"left-bar\"></span>\n              <p>or</p>\n              <span className=\"right-bar\"></span>\n            </div>\n\n            <input\n              type=\"submit\"\n              value=\"Log in with Google\"\n              onClick={signInWithGoogle}\n              className=\"sign-in-button-with-google\"\n            />\n\n            <p className=\"link-area\">\n              Don't have an account? <Link to=\"/\">sign up</Link>\n            </p>\n          </form>\n\n\n\n        </div>\n      </div>\n    </>\n  );\n}\n\n\n\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}